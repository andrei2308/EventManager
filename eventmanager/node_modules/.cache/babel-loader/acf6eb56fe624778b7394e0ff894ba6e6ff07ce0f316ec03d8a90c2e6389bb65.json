{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nvar glob = require('glob');\nvar path = require('path');\nvar memo = {};\nfunction compare(a, b) {\n  var result;\n  var ar;\n  var br;\n  ar = {\n    dirname: path.dirname(a).replace(/^\\./g, ''),\n    basename: path.basename(a).replace(/\\:/g, '~')\n  };\n  br = {\n    dirname: path.dirname(b).replace(/^\\./g, ''),\n    basename: path.basename(b).replace(/\\:/g, '~')\n  };\n  if (ar.dirname === br.dirname) {\n    result = -1;\n    if (ar.basename > br.basename) {\n      result = 1;\n    }\n  } else {\n    result = 1;\n    if (ar.dirname < br.dirname) {\n      result = -1;\n    }\n  }\n  return result;\n}\nfunction fsRoutes(dir, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  dir = path.resolve(process.cwd(), dir);\n  options.glob = options.glob || '**/*.js';\n  options.indexFileRegExp = options.indexFileRegExp || /(?:index)?\\.js$/;\n  var cacheKey = dir + options.glob;\n  if (!memo[cacheKey]) {\n    memo[cacheKey] = glob.sync(options.glob, {\n      cwd: dir\n    }).sort(compare).map(function (file) {\n      return {\n        path: path.resolve(dir, file),\n        route: '/' + file.replace(options.indexFileRegExp, '')\n      };\n    });\n  }\n  return memo[cacheKey];\n}\nexports[\"default\"] = fsRoutes;","map":{"version":3,"names":["glob","require","path","memo","compare","a","b","result","ar","br","dirname","replace","basename","fsRoutes","dir","options","resolve","process","cwd","indexFileRegExp","cacheKey","sync","sort","map","file","route","exports"],"sources":["../index.ts"],"sourcesContent":[null],"mappings":";;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAME,IAAI,GAAG,EAAE;AAEf,SAASC,OAAOA,CAACC,CAAS,EAAEC,CAAS;EACnC,IAAIC,MAAM;EACV,IAAIC,EAAE;EACN,IAAIC,EAAE;EACND,EAAE,GAAG;IACHE,OAAO,EAAER,IAAI,CAACQ,OAAO,CAACL,CAAC,CAAC,CAACM,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAC5CC,QAAQ,EAAEV,IAAI,CAACU,QAAQ,CAACP,CAAC,CAAC,CAACM,OAAO,CAAC,KAAK,EAAE,GAAG;GAC9C;EACDF,EAAE,GAAG;IACHC,OAAO,EAAER,IAAI,CAACQ,OAAO,CAACJ,CAAC,CAAC,CAACK,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAC5CC,QAAQ,EAAEV,IAAI,CAACU,QAAQ,CAACN,CAAC,CAAC,CAACK,OAAO,CAAC,KAAK,EAAE,GAAG;GAC9C;EAED,IAAIH,EAAE,CAACE,OAAO,KAAKD,EAAE,CAACC,OAAO,EAAE;IAC7BH,MAAM,GAAG,CAAC,CAAC;IACX,IAAIC,EAAE,CAACI,QAAQ,GAAGH,EAAE,CAACG,QAAQ,EAAE;MAC7BL,MAAM,GAAG,CAAC;;GAEb,MAAM;IACLA,MAAM,GAAG,CAAC;IACV,IAAIC,EAAE,CAACE,OAAO,GAAGD,EAAE,CAACC,OAAO,EAAE;MAC3BH,MAAM,GAAG,CAAC,CAAC;;;EAIf,OAAOA,MAAM;AACf;AAYA,SAAwBM,QAAQA,CAC9BC,GAAW,EACXC,OAA6B;EAA7B,IAAAA,OAAA;IAAAA,OAAA,KAA6B;EAAA;EAE7BD,GAAG,GAAGZ,IAAI,CAACc,OAAO,CAACC,OAAO,CAACC,GAAG,EAAE,EAAEJ,GAAG,CAAC;EACtCC,OAAO,CAACf,IAAI,GAAGe,OAAO,CAACf,IAAI,IAAI,SAAS;EACxCe,OAAO,CAACI,eAAe,GAAGJ,OAAO,CAACI,eAAe,IAAI,iBAAiB;EACtE,IAAMC,QAAQ,GAAGN,GAAG,GAAGC,OAAO,CAACf,IAAI;EAEnC,IAAI,CAACG,IAAI,CAACiB,QAAQ,CAAC,EAAE;IACnBjB,IAAI,CAACiB,QAAQ,CAAC,GAAGpB,IAAI,CAClBqB,IAAI,CAACN,OAAO,CAACf,IAAI,EAAE;MAAEkB,GAAG,EAAEJ;IAAG,CAAE,CAAC,CAChCQ,IAAI,CAAClB,OAAO,CAAC,CACbmB,GAAG,CAAC,UAACC,IAAI;MAAK,OAAC;QACdtB,IAAI,EAAEA,IAAI,CAACc,OAAO,CAACF,GAAG,EAAEU,IAAI,CAAC;QAC7BC,KAAK,EAAE,GAAG,GAAGD,IAAI,CAACb,OAAO,CAACI,OAAO,CAACI,eAAe,EAAE,EAAE;OACtD;IAHc,CAGb,CAAC;;EAGP,OAAOhB,IAAI,CAACiB,QAAQ,CAAC;AACvB;AApBAM,OAAA,cAAAb,QAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}