{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.convertParametersToJSONSchema = void 0;\nfunction convertParametersToJSONSchema(parameters) {\n  var parametersSchema = {};\n  var bodySchema = getBodySchema(parameters);\n  var formDataSchema = getSchema(parameters, 'formData');\n  var headerSchema = getSchema(parameters, 'header');\n  var pathSchema = getSchema(parameters, 'path');\n  var querySchema = getSchema(parameters, 'query');\n  var cookieSchema = getSchema(parameters, 'cookie');\n  if (bodySchema) {\n    parametersSchema.body = bodySchema;\n  }\n  if (formDataSchema) {\n    parametersSchema.formData = formDataSchema;\n  }\n  if (headerSchema) {\n    parametersSchema.headers = headerSchema;\n  }\n  if (pathSchema) {\n    parametersSchema.path = pathSchema;\n  }\n  if (querySchema) {\n    parametersSchema.query = querySchema;\n  }\n  if (cookieSchema) {\n    parametersSchema.cookie = cookieSchema;\n  }\n  return parametersSchema;\n}\nexports.convertParametersToJSONSchema = convertParametersToJSONSchema;\nvar VALIDATION_KEYWORDS = ['additionalItems', 'default', 'example', 'description', 'enum', 'examples', 'exclusiveMaximum', 'exclusiveMinimum', 'format', 'items', 'maxItems', 'maxLength', 'maximum', 'minItems', 'minLength', 'minimum', 'multipleOf', 'pattern', 'title', 'type', 'uniqueItems'];\nfunction copyValidationKeywords(src) {\n  var dst = {};\n  for (var i = 0, keys = Object.keys(src), len = keys.length; i < len; i++) {\n    var keyword = keys[i];\n    if (VALIDATION_KEYWORDS.indexOf(keyword) > -1 || keyword.slice(0, 2) === 'x-') {\n      dst[keyword] = src[keyword];\n    }\n  }\n  return dst;\n}\nfunction handleNullable(schema) {\n  return {\n    anyOf: [schema, {\n      type: 'null'\n    }]\n  };\n}\nvar SUBSCHEMA_KEYWORDS = ['additionalItems', 'items', 'contains', 'additionalProperties', 'propertyNames', 'not'];\nvar SUBSCHEMA_ARRAY_KEYWORDS = ['items', 'allOf', 'anyOf', 'oneOf'];\nvar SUBSCHEMA_OBJECT_KEYWORDS = ['definitions', 'properties', 'patternProperties', 'dependencies'];\nfunction handleNullableSchema(schema) {\n  if (typeof schema !== 'object' || schema === null) {\n    return schema;\n  }\n  var newSchema = __assign({}, schema);\n  SUBSCHEMA_KEYWORDS.forEach(function (keyword) {\n    if (typeof schema[keyword] === 'object' && schema[keyword] !== null && !Array.isArray(schema[keyword])) {\n      newSchema[keyword] = handleNullableSchema(schema[keyword]);\n    }\n  });\n  SUBSCHEMA_ARRAY_KEYWORDS.forEach(function (keyword) {\n    if (Array.isArray(schema[keyword])) {\n      newSchema[keyword] = schema[keyword].map(handleNullableSchema);\n    }\n  });\n  SUBSCHEMA_OBJECT_KEYWORDS.forEach(function (keyword) {\n    if (typeof schema[keyword] === 'object' && schema[keyword] !== null) {\n      newSchema[keyword] = __assign({}, schema[keyword]);\n      Object.keys(schema[keyword]).forEach(function (prop) {\n        newSchema[keyword][prop] = handleNullableSchema(schema[keyword][prop]);\n      });\n    }\n  });\n  delete newSchema.$ref;\n  if (schema.nullable) {\n    delete newSchema.nullable;\n    return handleNullable(newSchema);\n  }\n  return newSchema;\n}\nfunction getBodySchema(parameters) {\n  var bodySchema = parameters.filter(function (param) {\n    return param[\"in\"] === 'body' && param.schema;\n  })[0];\n  if (bodySchema) {\n    bodySchema = bodySchema.schema;\n  }\n  return bodySchema;\n}\nfunction getSchema(parameters, type) {\n  var params = parameters.filter(byIn(type));\n  var schema;\n  if (params.length) {\n    schema = {\n      properties: {}\n    };\n    params.forEach(function (param) {\n      var paramSchema;\n      if ('schema' in param) {\n        paramSchema = handleNullableSchema(param.schema);\n        if ('examples' in param) {\n          paramSchema.examples = getExamples(param.examples);\n        }\n        schema.properties[param.name] = paramSchema;\n      } else {\n        paramSchema = copyValidationKeywords(param);\n        if ('examples' in paramSchema) {\n          paramSchema.examples = getExamples(paramSchema.examples);\n        }\n        schema.properties[param.name] = param.nullable ? handleNullable(paramSchema) : paramSchema;\n      }\n    });\n    schema.required = getRequiredParams(params);\n  }\n  return schema;\n}\nfunction getRequiredParams(parameters) {\n  return parameters.filter(byRequired).map(toName);\n}\nfunction getExamples(exampleSchema) {\n  return Object.keys(exampleSchema).map(function (k) {\n    return exampleSchema[k].value;\n  });\n}\nfunction byIn(str) {\n  return function (param) {\n    return param[\"in\"] === str && param.type !== 'file';\n  };\n}\nfunction byRequired(param) {\n  return !!param.required;\n}\nfunction toName(param) {\n  return param.name;\n}","map":{"version":3,"names":["convertParametersToJSONSchema","parameters","parametersSchema","bodySchema","getBodySchema","formDataSchema","getSchema","headerSchema","pathSchema","querySchema","cookieSchema","body","formData","headers","path","query","cookie","exports","VALIDATION_KEYWORDS","copyValidationKeywords","src","dst","i","keys","Object","len","length","keyword","indexOf","slice","handleNullable","schema","anyOf","type","SUBSCHEMA_KEYWORDS","SUBSCHEMA_ARRAY_KEYWORDS","SUBSCHEMA_OBJECT_KEYWORDS","handleNullableSchema","newSchema","__assign","forEach","Array","isArray","map","prop","$ref","nullable","filter","param","params","byIn","properties","paramSchema","examples","getExamples","name","required","getRequiredParams","byRequired","toName","exampleSchema","k","value","str"],"sources":["../index.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}